import{T as x,r as h,k as f,f as c,b as a,a as s,i as d,l as e,u,e as w,o as y}from"./app-BfoFl66u.js";import i from"./AutoComplete-Clz3380k.js";const j={class:"flex justify-center"},v={class:"text-xs w-full"},k={class:"py-1"},N={colspan:"3"},D={class:"my-5 border rounded p-1 border-sky-500"},S={class:"w-full"},T={__name:"AddProduk",props:{label_suppliers:Object,label_products:Object},setup(m){const n=m;console.log(n);const l=x({supplier:{id:"",nama:""},keterangan:"",product:{id:"",nama:"",satuan_main:"",satuan_sub:"",jumlah_main:"",jumlah_sub:"",harga_main:"",harga_sub:"",harga_total_main:"",harga_total_sub:""},harga_total_all:0,harga_total_all_formatted:0,nomor_nota:""});h(!1),f(l,r=>{});function p(r){l.supplier.id=r.res.id,l.supplier.nama=r.res.name}const _=r=>{try{l.product.id=r.res.id,l.product.nama=r.res.name,l.product.satuan_main=r.res.satuan_main,l.product.satuan_sub=r.res.satuan_sub,l.product.jumlah_main=r.res.jumlah_main,l.product.jumlah_sub=r.res.jumlah_sub,l.product.harga_main=r.res.harga_main,l.product.harga_sub=r.res.harga_sub,l.product.harga_total_main=r.res.harga_total_main,l.product.jumlah_main_formatted=formatNumberDecIDw100(r.res.jumlah_main),l.product.jumlah_sub_formatted=formatNumberDecIDw100(r.res.jumlah_sub),l.product.harga_main_formatted=formatNumberDecIDw100(r.res.harga_main),l.product.harga_total_main_formatted=formatNumberDecIDw100(r.res.harga_total_main),g()}catch(t){console.log(t),console.error(t)}},g=()=>{l.harga_total_all=0,l.product.forEach(r=>{let t=r.jumlah_sub*r.jumlah_main*r.harga_main;l.harga_total_all+=t}),l.harga_total_all_formatted=formatCurrencyIDw100(l.harga_total_all)},b=()=>{confirm("Apakah data yang diinput sudah benar?")&&l.post(route("produks.store"))};return(r,t)=>(y(),c("div",j,[a("form",{onSubmit:w(b,["prevent"]),class:"border rounded border-indigo-300 p-1 mt-1 lg:w-3/5 md:w-3/4"},[a("table",v,[a("tbody",null,[a("tr",null,[t[2]||(t[2]=a("td",null,"Supplier",-1)),t[3]||(t[3]=a("td",null,[a("div",{class:"mx-2"},":")],-1)),a("td",k,[s(i,{source:n.label_suppliers,index:null,placeholder:"nama supplier",onItem:p},null,8,["source"])])]),a("tr",null,[t[4]||(t[4]=a("td",null,"Nama",-1)),t[5]||(t[5]=a("td",null,[a("div",{class:"mx-2"},":")],-1)),a("td",null,[s(i,{source:n.label_products,index:null,placeholder:"nama produk",onItem:_},null,8,["source"])])]),a("tr",null,[a("td",N,[a("div",D,[t[17]||(t[17]=a("div",{class:"my-2 font-semibold text-center"},"Satuan - Jumlah - Harga per Satuan - Harga Total:",-1)),a("table",S,[a("tbody",null,[a("tr",null,[t[6]||(t[6]=a("td",null,"Satuan Utama",-1)),t[7]||(t[7]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[d(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>u(l).product.satuan_main=o),class:"text-xs rounded p-1 w-3/4"},null,512),[[e,u(l).product.satuan_main]])]),t[8]||(t[8]=a("td",null,"Jumlah",-1)),t[9]||(t[9]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[d(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>u(l).product.jumlah_main=o),class:"text-xs rounded p-1 w-3/4",oninput:"count_harga_total_main()"},null,512),[[e,u(l).product.jumlah_main]])]),t[10]||(t[10]=a("td",null,"Harga",-1)),t[11]||(t[11]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),t[12]||(t[12]=a("td",null,[a("input",{type:"text",id:"product_new-harga_main",class:"text-xs rounded p-1",onchange:"formatNumber(this, 'product_new-harga_main-real')"}),a("input",{type:"hidden",name:"harga_main",id:"product_new-harga_main-real"})],-1)),t[13]||(t[13]=a("td",null,"Harga Total",-1)),t[14]||(t[14]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),t[15]||(t[15]=a("td",null,[a("input",{type:"text",name:"harga_total_main",id:"product_new-harga_total_main",class:"text-xs rounded p-1",onchange:"formatNumber(this, 'product_new-harga_total_main-real');copy_to_harga_sub();count_harga_total_sub()"}),a("input",{type:"hidden",name:"harga_total_main",id:"product_new-harga_total_main-real"})],-1))]),t[16]||(t[16]=a("tr",null,[a("td",null,"Satuan Sub"),a("td",null,[a("div",{class:"mx-1"},":")]),a("td",null,[a("input",{type:"text",name:"satuan_sub",class:"text-xs rounded p-1 w-3/4"})]),a("td",null,"Jumlah"),a("td",null,[a("div",{class:"mx-1"},":")]),a("td",null,[a("input",{type:"text",name:"jumlah_sub",id:"product_new-jumlah_sub",class:"text-xs rounded p-1 w-3/4",oninput:"count_harga_total_sub()"})]),a("td",null,"Harga"),a("td",null,[a("div",{class:"mx-1"},":")]),a("td",null,[a("input",{type:"text",id:"product_new-harga_sub",class:"text-xs rounded p-1",onchange:"formatNumber(this, 'product_new-harga_sub-real');count_harga_total_sub()"}),a("input",{type:"hidden",name:"harga_sub",id:"product_new-harga_sub-real"})]),a("td",null,"Harga Total"),a("td",null,[a("div",{class:"mx-1"},":")]),a("td",null,[a("input",{type:"text",name:"harga_total_sub",id:"product_new-harga_total_sub",class:"text-xs rounded p-1",onchange:"formatNumber(this, 'product_new-harga_total_sub-real');"}),a("input",{type:"hidden",name:"harga_total_sub",id:"product_new-harga_total_sub-real"})])],-1))])])])])]),t[18]||(t[18]=a("tr",{class:"align-top"},[a("td",null,"Ket. (opt.)"),a("td",null,[a("div",{class:"mx-2"},":")]),a("td",{class:"py-1"},[a("textarea",{name:"keterangan",id:"",cols:"40",rows:"3",placeholder:"keterangan...",class:"rounded text-xs p-1"})])],-1))])]),t[19]||(t[19]=a("div",{class:"flex justify-center mt-3"},[a("button",{type:"submit",class:"border-2 border-indigo-300 bg-indigo-200 text-indigo-600 rounded-lg font-semibold py-1 px-3 hover:bg-indigo-300"},"+ Tambah Produk")],-1))],32)]))}};export{T as default};
