import{T as f,r as y,k as j,f as v,b as a,a as m,i as s,l as d,u as r,e as w,o as V}from"./app-BfoFl66u.js";import g from"./AutoComplete-Clz3380k.js";import{f as o,a as U}from"./functions-CdnaNR_l.js";const h={class:"flex justify-center"},k={class:"text-xs w-full"},S={class:"py-1"},H={colspan:"3"},T={class:"my-5 border rounded p-1 border-sky-500"},B={class:"w-full"},J={__name:"AddBarang",props:{label_suppliers:Object,label_barangs:Object},setup(i){const e=i,l=f({supplier:{id:"",nama:""},keterangan:"",barang:{id:"",nama:"",satuan_main:"",satuan_sub:"",jumlah_main:"",jumlah_sub:"",harga_main:"",harga_sub:"",harga_main_formatted:"",harga_sub_formatted:"",harga_total_main:"",harga_total_sub:"",harga_total_main_formatted:"",harga_total_sub_formatted:""}});y(!1),j(l,n=>{});function b(n){l.supplier.id=n.res.id,l.supplier.nama=n.res.name}const p=n=>{console.log("listened",n);try{l.barang.id=n.res.id,l.barang.nama=n.res.name,l.barang.satuan_main=n.res.satuan_main,l.barang.satuan_sub=n.res.satuan_sub,l.barang.jumlah_main=n.res.jumlah_main,l.barang.jumlah_sub=n.res.jumlah_sub,l.barang.harga_main=n.res.harga_main,l.barang.harga_sub=n.res.harga_sub,l.barang.harga_total_main=n.res.harga_total_main,l.barang.harga_total_sub=n.res.harga_total_main*n.res.jumlah_sub,l.barang.jumlah_main_formatted=o(n.res.jumlah_main),l.barang.jumlah_sub_formatted=o(n.res.jumlah_sub),l.barang.harga_main_formatted=o(n.res.harga_main),l.barang.harga_total_main_formatted=o(n.res.harga_total_main),l.barang.harga_total_sub_formatted=o(l.barang.harga_total_sub),_()}catch(t){console.log(t)}},_=()=>{l.barang.harga_total_sub=0;let n=l.barang.jumlah_sub*l.barang.jumlah_main*l.barang.harga_main;l.barang.harga_total_sub+=n,l.barang.harga_total_sub_formatted=U(l.barang.harga_total_sub)},x=()=>{confirm("Apakah data yang diinput sudah benar?")&&l.post(route("barangs.store"))};return(n,t)=>(V(),v("div",h,[a("form",{onSubmit:w(x,["prevent"]),class:"border rounded border-indigo-300 p-1 mt-1 lg:w-3/5 md:w-3/4"},[a("table",k,[a("tbody",null,[a("tr",null,[t[12]||(t[12]=a("td",null,"Supplier",-1)),t[13]||(t[13]=a("td",null,[a("div",{class:"mx-2"},":")],-1)),a("td",S,[m(g,{source:e.label_suppliers,index:null,placeholder:"nama supplier",onItem:b},null,8,["source"])])]),a("tr",null,[t[14]||(t[14]=a("td",null,"Nama",-1)),t[15]||(t[15]=a("td",null,[a("div",{class:"mx-2"},":")],-1)),a("td",null,[m(g,{source:e.label_barangs,index:null,placeholder:"nama produk",onItem:p},null,8,["source"])])]),a("tr",null,[a("td",H,[a("div",T,[t[32]||(t[32]=a("div",{class:"my-2 font-semibold text-center"},"Satuan - Jumlah - Harga per Satuan - Harga Total:",-1)),a("table",B,[a("tbody",null,[a("tr",null,[t[16]||(t[16]=a("td",null,"Satuan Utama",-1)),t[17]||(t[17]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=u=>r(l).barang.satuan_main=u),class:"text-xs rounded p-1 w-3/4"},null,512),[[d,r(l).barang.satuan_main]])]),t[18]||(t[18]=a("td",null,"Jumlah",-1)),t[19]||(t[19]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=u=>r(l).barang.jumlah_main=u),class:"text-xs rounded p-1 w-3/4"},null,512),[[d,r(l).barang.jumlah_main]])]),t[20]||(t[20]=a("td",null,"Harga",-1)),t[21]||(t[21]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=u=>r(l).barang.harga_main_formatted=u),class:"text-xs rounded p-1"},null,512),[[d,r(l).barang.harga_main_formatted]]),s(a("input",{type:"hidden","onUpdate:modelValue":t[3]||(t[3]=u=>r(l).barang.harga_main=u)},null,512),[[d,r(l).barang.harga_main]])]),t[22]||(t[22]=a("td",null,"Harga Total",-1)),t[23]||(t[23]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=u=>r(l).barang.harga_total_main_formatted=u),class:"text-xs rounded p-1",onchange:"formatNumber(this, 'barang_new-harga_total_main-real');copy_to_harga_sub();count_harga_total_sub()"},null,512),[[d,r(l).barang.harga_total_main_formatted]]),s(a("input",{type:"hidden","onUpdate:modelValue":t[5]||(t[5]=u=>r(l).barang.harga_total_main=u),id:"barang_new-harga_total_main-real"},null,512),[[d,r(l).barang.harga_total_main]])])]),a("tr",null,[t[24]||(t[24]=a("td",null,"Satuan Sub",-1)),t[25]||(t[25]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=u=>r(l).barang.satuan_sub=u),class:"text-xs rounded p-1 w-3/4"},null,512),[[d,r(l).barang.satuan_sub]])]),t[26]||(t[26]=a("td",null,"Jumlah",-1)),t[27]||(t[27]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=u=>r(l).barang.jumlah_sub_formatted=u),class:"text-xs rounded p-1 w-3/4"},null,512),[[d,r(l).barang.jumlah_sub_formatted]])]),t[28]||(t[28]=a("td",null,"Harga",-1)),t[29]||(t[29]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=u=>r(l).barang.harga_sub_formatted=u),class:"text-xs rounded p-1",onchange:"formatNumber(this, 'barang_new-harga_sub-real');count_harga_total_sub()"},null,512),[[d,r(l).barang.harga_sub_formatted]]),s(a("input",{type:"hidden","onUpdate:modelValue":t[9]||(t[9]=u=>r(l).barang.harga_sub=u)},null,512),[[d,r(l).barang.harga_sub]])]),t[30]||(t[30]=a("td",null,"Harga Total",-1)),t[31]||(t[31]=a("td",null,[a("div",{class:"mx-1"},":")],-1)),a("td",null,[s(a("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=u=>r(l).barang.harga_total_sub_formatted=u),class:"text-xs rounded p-1"},null,512),[[d,r(l).barang.harga_total_sub_formatted]]),s(a("input",{type:"hidden","onUpdate:modelValue":t[11]||(t[11]=u=>r(l).barang.harga_total_sub=u)},null,512),[[d,r(l).barang.harga_total_sub]])])])])])])])]),t[33]||(t[33]=a("tr",{class:"align-top"},[a("td",null,"Ket. (opt.)"),a("td",null,[a("div",{class:"mx-2"},":")]),a("td",{class:"py-1"},[a("textarea",{name:"keterangan",id:"",cols:"40",rows:"3",placeholder:"keterangan...",class:"rounded text-xs p-1"})])],-1))])]),t[34]||(t[34]=a("div",{class:"flex justify-center mt-3"},[a("button",{type:"submit",class:"border-2 border-indigo-300 bg-indigo-200 text-indigo-600 rounded-lg font-semibold py-1 px-3 hover:bg-indigo-300"},"+ Tambah Produk")],-1))],32)]))}};export{J as default};
