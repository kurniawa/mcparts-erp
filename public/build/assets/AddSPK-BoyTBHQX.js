import{T as b,k as x,r as c,f as d,b as e,e as _,a as m,u as s,i as k,l as S,F as w,m as K,t as P,g as h,o as r,c as D}from"./app-BfoFl66u.js";import C from"./SimpleDatePicker-Df35MVE1.js";import N from"./AddSPKItem-CSsWJSbp.js";import{_ as T,l as j}from"./AutoCompleteAPI-DqwSXif2.js";import"./index-DXB66utZ.js";const B={id:"form_new_spk",class:"w-full bg-white rounded-lg text-xs"},E={class:"flex"},M={class:"border rounded p-2"},F={class:"border-b pb-3"},V={class:"py-1"},A={class:"py-1"},R={class:"py-1"},U={class:"mt-2"},$={id:"table_spk_items",class:"text-slate-500 w-full"},Y={key:0,class:"p-2 flex"},J={class:"bg-red-200 border-2 border-red-500 rounded p-1"},Q={__name:"AddSPK",setup(L){const a=new Date,l=b({day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear(),use_date:!0,keterangan:null,pelanggan:{id:null,nama:null},reseller:{id:null},SPKItems:[]}),u=["id","name","reseller_id"];x(l,n=>{});function p(n){n.use_date&&(l.day=n.value.getDate(),l.month=n.value.getMonth()+1,l.year=n.value.getFullYear()),l.use_date=n.use_date}function g(n){l.pelanggan.id=n.id,l.pelanggan.nama=n.name,n.reseller_id?l.reseller.id=n.reseller_id:l.reseller.id=null}let i=c(0);function f(){l.SPKItems.push({componentID:i.value,itemID:null,itemName:null,jumlahItem:null,keterangan:null}),i.value++}function y(n){const t=l.SPKItems.findIndex(o=>o.componentID===n.iSPKItem);l.SPKItems[t].itemID=n.itemID,l.SPKItems[t].itemName=n.itemName,l.SPKItems[t].jumlahItem=n.jumlahItem,l.SPKItems[t].keterangan=n.keterangan}function v(n){const t=l.SPKItems.findIndex(o=>o.componentID===n);l.SPKItems.splice(t,1)}function I(){l.post(route("spks.store"))}return(n,t)=>(r(),d("div",B,[e("div",E,[e("form",{onSubmit:_(I,["prevent"]),class:"w-full"},[e("div",M,[e("div",F,[e("table",null,[e("tbody",null,[e("tr",null,[t[1]||(t[1]=e("td",null,"Tanggal",-1)),t[2]||(t[2]=e("td",null,[e("div",{class:"mx-2"},":")],-1)),e("td",V,[m(C,{day:s(l).day,month:s(l).month,year:s(l).year,onChosen_date:p},null,8,["day","month","year"])])]),e("tr",null,[t[3]||(t[3]=e("td",null,"Untuk",-1)),t[4]||(t[4]=e("td",null,[e("div",{class:"mx-2"},":")],-1)),e("td",A,[m(T,{onParamsToEmit:g,placeholder:"nama pelanggan",apiName:"search-customers",parametersToAssign:u})])]),e("tr",null,[t[5]||(t[5]=e("td",null,"Ket. (opt.)",-1)),t[6]||(t[6]=e("td",null,[e("div",{class:"mx-2"},":")],-1)),e("td",R,[k(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s(l).keterangan=o),placeholder:"judul/keterangan...",class:"text-xs rounded-md border-0 py-1 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"},null,512),[[S,s(l).keterangan]])])])])])]),e("div",U,[e("table",$,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"Nama Item"),e("th",null,"Jumlah")])],-1)),e("tbody",null,[(r(!0),d(w,null,K(s(l).SPKItems,o=>(r(),D(N,{key:o.componentID,keySPKItem:o.componentID,onChosenSPKItem:y,onRemoveSPKItem:v},null,8,["keySPKItem"]))),128)),e("tr",null,[e("td",null,[e("button",{type:"button",class:"rounded bg-emerald-200 text-emerald-600",onClick:f},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)]))])])])])])]),s(j.isEmpty)(s(l).errors)?h("",!0):(r(),d("div",Y,[e("div",J,[t[9]||(t[9]=e("span",{class:"font-bold"},"Errors:",-1)),e("div",null,P(s(l).errors),1)])])),t[10]||(t[10]=e("div",{class:"flex justify-center mt-3"},[e("button",{type:"submit",class:"border-2 border-emerald-300 bg-emerald-200 text-emerald-600 rounded-lg font-semibold py-1 px-3 hover:bg-emerald-300"},"proses new SPK")],-1))],32)])]))}};export{Q as default};
